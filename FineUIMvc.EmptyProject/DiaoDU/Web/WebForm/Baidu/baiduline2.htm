<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=62744cd2bac2cfd0cf132c636f9ab2ee"></script>
   
    <title>百度地图的Hello, World</title>

    <style type="text/css">
        * {
            margin: 0px;
            padding: 0px;
        }

        a {
            color: black;
        }

        #keleyislide {
            width: 300px;
            height: 200px;
            border: 1px solid #000;
            position: fixed;
            bottom: 2px;
            right: 2px;
            display: none;
            background-color: White;
            z-index: 9999;
        }

            #keleyislide a {
                position: absolute;
                top: 8px;
                right: 8px;
                font-size: 12px;
                text-decoration: none;
                color: red;
            }

            #keleyislide h2 {
                font-size: 24px;
                text-align: center;
                font-family: "微软雅黑";
            }

        #reshow {
            position: fixed;
            right: 2px;
            bottom: 2px;
            font-size: 12px;
            display: none;
            cursor: pointer;
            border: 1px solid #000;
        }
    </style>
    <style type="text/css">
        body, html, #allmap {
            width: 100%;
            height: 100%;
            overflow: hidden;
            margin: 0;
        }
    </style>
</head>
<body>
    <div id="allmap">
    </div>
    <div id="control">
        <button onclick="polyline20.enableEditing();">开启线、面编辑功能</button>
        <button onclick="polyline20.disableEditing();">关闭线、面编辑功能</button>
        <button onclick="onOk();">获取坐标</button>
    </div>
</body>
</html>
<script type="text/javascript">
    var z;

    //var map = new BMap.Map("allmap");
    var map = new BMap.Map("allmap", { mapType: BMAP_SATELLITE_MAP });  //new BMap.Map("allmap");
    var point = new BMap.Point(121.191419, 31.166018);    // 创建点坐标
    map.centerAndZoom(point, 5);                     // 初始化地图,设置中心点坐标和地图级别。
    map.enableScrollWheelZoom();                            //启用滚轮放大缩小
    map.setZoom(19);

    map.addControl(new BMap.NavigationControl());  //添加默认缩放平移控件
    map.addControl(new BMap.NavigationControl({ anchor: BMAP_ANCHOR_TOP_RIGHT, type: BMAP_NAVIGATION_CONTROL_SMALL }));  //右上角，仅包含平移和缩放按钮
    map.addControl(new BMap.NavigationControl({ anchor: BMAP_ANCHOR_BOTTOM_LEFT, type: BMAP_NAVIGATION_CONTROL_PAN }));  //左下角，仅包含平移按钮
    map.addControl(new BMap.NavigationControl({ anchor: BMAP_ANCHOR_BOTTOM_RIGHT, type: BMAP_NAVIGATION_CONTROL_ZOOM }));  //右下角，仅包含缩放按钮

    //map.clearOverlays();
 
    var polyline = new BMap.Polyline([
        new BMap.Point(121.190413, 31.167343),
        new BMap.Point(121.191078, 31.165161),
        new BMap.Point(121.193077, 31.165644),
        new BMap.Point(121.192857, 31.166374),
        new BMap.Point(121.191887, 31.166138),
        new BMap.Point(121.191909, 31.166061),

    ], { strokeColor: "red", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
    map.addOverlay(polyline);   //增加折线


    var polyline1 = new BMap.Polyline([
        new BMap.Point(121.190692, 31.166427),
        new BMap.Point(121.190631, 31.166416),
        new BMap.Point(121.190568, 31.166624),
        new BMap.Point(121.190285, 31.166551),
        new BMap.Point(121.19035, 31.166335),
        new BMap.Point(121.190135, 31.166281),
        new BMap.Point(121.19035, 31.166335),
        new BMap.Point(121.190453, 31.16596),
        new BMap.Point(121.190242, 31.165914),

    ], { strokeColor: "red", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
    map.addOverlay(polyline1);   //增加折线


    var polyline2 = new BMap.Polyline([
        new BMap.Point(121.19095, 31.165589),
        new BMap.Point(121.19112, 31.165628),
        new BMap.Point(121.19108, 31.165748),
        new BMap.Point(121.19112, 31.165624),
        new BMap.Point(121.191156, 31.165508),

    ], { strokeColor: "red", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
    map.addOverlay(polyline2);   //增加折线


    var polyline3 = new BMap.Polyline([
       new BMap.Point(121.192573, 31.165535),
       new BMap.Point(121.192538, 31.165663),

    ], { strokeColor: "red", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
    map.addOverlay(polyline3);   //增加折线

    var polyline4 = new BMap.Polyline([
        new BMap.Point(121.192825, 31.165582),
        new BMap.Point(121.192847, 31.165504),
        new BMap.Point(121.193211, 31.165585),
        new BMap.Point(121.193189, 31.165667),
        new BMap.Point(121.193795, 31.165806),
        new BMap.Point(121.193836, 31.165674),
        new BMap.Point(121.193512, 31.165601),

    ], { strokeColor: "red", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
    map.addOverlay(polyline4);   //增加折线


   var polyline5 = new BMap.Polyline([
        new BMap.Point(121.193615, 31.166497),
        new BMap.Point(121.193553, 31.166725),
        new BMap.Point(121.193081, 31.166609),
        new BMap.Point(121.192951, 31.166976),
        new BMap.Point(121.192771, 31.166984),
        new BMap.Point(121.193126, 31.165806),
        new BMap.Point(121.193032, 31.16579),

    ], { strokeColor: "red", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
    map.addOverlay(polyline5);   //增加折线



   var polyline11 = new BMap.Polyline([
        new BMap.Point(121.191958, 31.166265),
        new BMap.Point(121.191981, 31.1662),
        new BMap.Point(121.192888, 31.166427),
        new BMap.Point(121.193166, 31.165485),
        new BMap.Point(121.19243, 31.165323),


   ], { strokeColor: "blue", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
   map.addOverlay(polyline11);   //增加折线

   var polyline11_1 = new BMap.Polyline([
        new BMap.Point(121.192461, 31.16523),
        new BMap.Point(121.193193, 31.165385),
        new BMap.Point(121.193166, 31.165485),


   ], { strokeColor: "blue", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
   map.addOverlay(polyline11_1);   //增加折线






   var polyline12 = new BMap.Polyline([

        new BMap.Point(121.193319, 31.16557),
        new BMap.Point(121.193234, 31.165551),
        new BMap.Point(121.192614, 31.165415),
        new BMap.Point(121.1926, 31.165477),
        new BMap.Point(121.192452, 31.165446),
        new BMap.Point(121.192407, 31.16562),



   ], { strokeColor: "blue", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
   map.addOverlay(polyline12);   //增加折线


   var polyline13 = new BMap.Polyline([
        new BMap.Point(121.193535, 31.165558),
        new BMap.Point(121.193894, 31.165636),
        new BMap.Point(121.193822, 31.165871),
        new BMap.Point(121.193144, 31.165713),
        new BMap.Point(121.193175, 31.165612),
        new BMap.Point(121.192569, 31.165473),


   ], { strokeColor: "blue", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
   map.addOverlay(polyline13);   //增加折线


   var polyline5_1 = new BMap.Polyline([
    new BMap.Point(121.190718, 31.166358),
    new BMap.Point(121.190948, 31.166412),

   ], { strokeColor: "red", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
   map.addOverlay(polyline5_1);   //增加折线


   var polyline14_1 = new BMap.Polyline([
     new BMap.Point(121.192623, 31.166319),
     new BMap.Point(121.19265, 31.16623),

   ], { strokeColor: "red", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
   map.addOverlay(polyline14_1);   //增加折线


   var polyline20 = new BMap.Polyline([


   ], { strokeColor: "red", strokeWeight: 4, strokeOpacity: 0.5 });   //创建折线
   map.addOverlay(polyline20);   //增加折线



   var data = [{ name: "2.0", position: "121.190559,31.166864" }  //1
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.11", position: "121.190602,31.166489" }           //2
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.12", position: "121.190278,31.166323" }            //3
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.13", position: "121.190386,31.165948" }            //4
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.14", position: "121.1911,31.165701" }              //6
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.15", position: "121.191141,31.165558" }            //7
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.16", position: "121.191424,31.165246" }            //8
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.17", position: "121.191796,31.165346" }            //9
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.18", position: "121.19216,31.165427" }             //19
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.19", position: "121.19256,31.165601" }             //20
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.20", position: "121.192713,31.165512" }            //21
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.21", position: "121.193117,31.165373" }            //10
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.22", position: "121.193077,31.16547" }             //11
   , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.23", position: "121.192591,31.165361" }             //22

    , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.24", position: "121.193094,31.165728" }             //15
    , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.25", position: "121.192686,31.166393" }             //16
    , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.26", position: "121.19212,31.166246" }             //17

    , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.27", position: "121.193288,31.165562" }             //12
    , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.28", position: "121.192798,31.16691" }             //13

    , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.29", position: "121.190826,31.166385" }             //5
    , { pop: "管径：DN100,品牌：迪纳声，上传频率：60分钟", name: "0.30", position: "121.192641,31.166285" }             //14


    


    

    

   

   


   

   

  

  


   

  

  


   ];
   for (var o in data) {
       var pop = data[o].pop;
       var name = data[o].name;
       var position = data[o].position;

       var strs = new Array(); //定义一数组
       strs = position.split(",");

       var pt = new BMap.Point(strs[0], strs[1]);
       var myIcon = new BMap.Icon("Images/111.png", new BMap.Size(15, 15));
       var label = new BMap.Label(name, { offset: new BMap.Size(20, -10) });
       var marker2 = new BMap.Marker(pt, { icon: myIcon });  // 创建标注
       marker2.setLabel(label);


       var opts = {
           width: 200,     // 信息窗口宽度
           height: 100,     // 信息窗口高度
           title: "相关信息：", // 信息窗口标题
       }
       marker2.addEventListener('click', function () {
           this.openInfoWindow(new BMap.InfoWindow(pop, opts));

       });


       map.addOverlay(marker2);

   }







   




    function onOk() {
        var myStringArray = polyline20.ia;
        for (var i = 0; i < myStringArray.length; i++) {
            console.log("new BMap.Point(" + myStringArray[i].lng + "," + myStringArray[i].lat + "),");
        }
    }

</script>


